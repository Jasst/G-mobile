<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BTC Key Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0; padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background-color: #111;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
      color: #00ffcc;
      text-shadow: 0 0 10px #00ffcc77;
      animation: fadeIn 1.5s ease;
    }

    form {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #00000088;
      width: 100%;
      max-width: 500px;
      animation: fadeInUp 1s ease;
    }

    label {
      display: block;
      margin: 10px 0 4px;
      color: #ccc;
    }

    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: none;
      background: #222;
      color: #fff;
      margin-bottom: 10px;
    }

    button {
      background: #00ffcc;
      color: #000;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 5px;
      margin-top: 10px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #00cfa6;
    }

    #log {
      margin-top: 30px;
      padding: 15px;
      width: 100%;
      max-width: 600px;
      background: #151515;
      border-radius: 10px;
      height: 200px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 0.9em;
      box-shadow: 0 0 10px #00000055;
      animation: fadeInUp 1.5s ease;
    }

    .controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .controls button {
      flex: 1;
    }

    @keyframes fadeIn {
      from { opacity: 0; } to { opacity: 1; }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <h1>BTC Key Finder</h1>

  <form id="search-form">
    <label for="target_address">Target BTC Address</label>
    <input type="text" id="target_address" name="target_address" required>

    <label for="start">Start Private Key (hex)</label>
    <input type="text" id="start" name="start" placeholder="e.g. 000000...0000" required>

    <label for="end">End Private Key (hex)</label>
    <input type="text" id="end" name="end" placeholder="e.g. ffffff...ffff" required>

    <label for="mode">Mode</label>
    <select name="mode" id="mode">
      <option value="sequential">Sequential</option>
      <option value="random">Random</option>
    </select>

    <label for="prefix_length">Prefix Match Length</label>
    <input type="number" name="prefix_length" id="prefix_length" value="8" min="1" max="34">

    <label for="attempts">Random Attempts (if random mode)</label>
    <input type="number" name="attempts" id="attempts" value="1000">

    <button type="submit">Start Search</button>
  </form>

  <div class="controls">
    <button onclick="send('/pause')">‚è∏ Pause</button>
    <button onclick="send('/resume')">‚ñ∂ Resume</button>
    <button onclick="send('/stop')">‚õî Stop</button>
    <button onclick="clearLog()">üßπ Clear Log</button>
  </div>

  <pre id="log">Logs will appear here...</pre>

  <script>
    const logBox = document.getElementById('log');

    function appendLog(msg) {
      logBox.textContent = msg;
      logBox.scrollTop = logBox.scrollHeight;
    }

    function send(endpoint) {
      fetch(endpoint, { method: 'POST' })
        .then(res => res.json())
        .then(data => appendLog(`>> ${data.result || data.error}`));
    }

    function clearLog() {
      fetch('/clear_log').then(res => res.json()).then(data => {
        logBox.textContent = '';
        appendLog(`>> ${data.result}`);
      });
    }

    document.getElementById('search-form').addEventListener('submit', e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());

      fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(json => {
        appendLog(json.result || json.error);
      });
    });

    // Poll logs every 3s
    setInterval(() => {
      fetch('/progress')
        .then(res => res.json())
        .then(json => {
          if (json.result) appendLog(json.result);
        });
    }, 3000);
  </script>

</body>
</html>